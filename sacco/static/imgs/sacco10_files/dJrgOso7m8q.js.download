if (self.CavalryLogger) { CavalryLogger.start_js(["lp580"]); }

__d("IrisSubscribeChecker",["MqttLogger","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=b("MqttLogger").getInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1}a.prototype.onConnectAttempt=function(){};a.prototype.onConnectFailure=function(){};a.prototype.onConnected=function(){this.$6(),this.$3=!1,this.$4=!1,this.$5=!1,this.$2=b("setTimeoutAcrossTransitions")(function(){this.$7()}.bind(this),8e3)};a.prototype.onConnectSuccess=function(){};a.prototype.onConnectionLost=function(){this.$6()};a.prototype.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};a.prototype.onUnsubscribe=function(a){};a.prototype.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$6()))};a.prototype.onMessage=function(a){};a.prototype.$6=function(){this.$2!==null&&(clearTimeout(this.$2),this.$2=null)};a.prototype.$7=function(){var a=window.location.hostname;a=a.replace(".","-");this.$3===!1&&(this.$1.bumpCounter(a+".no_iris_topic_subscribe"),this.$1.debugTrace("irisSubscribeChecker","iris topic not subscribed"));this.$4===!1&&(this.$1.bumpCounter(a+".no_iris_session"),this.$1.debugTrace("irisSubscribeChecker","iris session not subscribed"));this.$3===!0&&this.$4===!0&&this.$5===!1&&(this.$1.bumpCounter(a+".session_before_topic_subscribe"),this.$1.debugTrace("irisSubscribeChecker","iris session subscribed before topic subscribe"))};e.exports=a}),null);